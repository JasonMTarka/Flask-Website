{% extends "layout.html" %}

{% block content %}
<div class="content_section">
    <form method="POST" action="">
        {{ form.hidden_tag() }} <!-- NEEDED, this helps protect user security by adding CSRF (Cross Site Request Forgery) token -->
        <fieldset class="form-group"> <!-- Bootstrap class to help make look nicer -->
            <legend class="border-bottom"> <!-- mb-4 == margin bottom with a value of 4 -->
            Coronavirus Case Scraper
            </legend>
        </fieldset>
        <div class="row mb-4">
        Below is a graph made using Matplotlib which was generated by the graphing function of my coronavirus scraping program.
        This data covers new coronavirus cases from February 22nd, 2021 to March 20th, 2021.
        </div>
        <div class="row mb-4">
        I live in Tokyo and my family lives in Dayton, Ohio in the USA, so sometimes it's hard to keep track of the coronavirus situation back home.  I wrote this script to keep a record of coronavirus cases both here in Tokyo and in Dayton.
        </div>
        <div class="row mb-4">
        I use an automated version of this script to run automatically each day with Task Scheduler on Windows.  
        I then record that data in a CSV file. 
        </div>
        <img src="{{ graph_img }}" width=750>
        <div>
        <small>*The above is an image of the Matplotlib graph this program produces.</small>
        </div>
        <div>
        <small>*For my purposes I define Dayton as two counties; Montgomery and Greene.</small>
        </div>
        <div class="mb-4">
        <small>*Data is taken from the New York Times and the official Tokyo COVID-19 information page.</small>
        </div>
        {% if data %}
        <div>
        The current date is {{data["Date"]}}.
        </div>
        <div>
        The number of new coronavirus cases in Dayton: {{data["Dayton"]}}
        </div>
        <div>
        The number of new coronavirus cases in Tokyo: {{data["Tokyo"]}}
        </div>
        {% else %}
        <div class="mb-4">
        Press the button below to scrape and see the current number of new COVID-19 cases in Dayton and Tokyo for today.
        </div>
        <div>
        <button type="submit" class="btn btn-primary">Scrape Data</button>
        </div>
        {% endif %}
    </form>
</div>
{% endblock content %}

{% block sidebar %}
<div class="col-md-4">
	<div class="content-section">
	<h3>{{ title }}</h3>
    	<p class='text-muted'>Scrapes daily coronavirus cases for Dayton, Ohio and Tokyo, Japan and records the data in a csv file.  Data can then be read from the csv file and rendered as a graph using Matplotlib.
        <ul class="list-group">
        <li class="list-group-item list-group-item-light"><a href="https://github.com/JasonMTarka/Coronavirus-Tracker/blob/main/coronavirus_scraper.py">Scraper Code - Github Link</a></li>
        <li class="list-group-item list-group-item-light"><a href= "https://github.com/JasonMTarka/Coronavirus-Tracker/blob/main/coronavirus_reader.py">Reader Code - Github Link</a></li>
        <li class="list-group-item list-group-item-light"><a href="https://www.linkedin.com/in/jason-tarka-342b371a6/">My LinkedIn</a></li>
        <li class="list-group-item list-group-item-light">jasonmtarka@gmail.com</li>
        </ul>
        </p>
    </div>
</div>
{% endblock sidebar %}